name: boss
components:
  ai_tag: {}
  ai:
    move_speed: 1.6
    follow_range: 0
    attack_range: 300
    attack_frames: 90
  ai_state: {}
  ai_context: {}
  ai_config:
    script: boss.tengo
  ai_phase_controller:
    reset_state_on_phase_change: true
    phases:

      - name: phase_1
        start_when:
          - player_in_range: 300
        on_enter:
          - set_ai:
              move_speed: 1.8
              follow_range: 650
              attack_range: 60
              attack_frames: 30
          - arena_set_active:
              group: boss_gate
              active: true
          - emit_event: phase_intro

      - name: phase_2
        start_when:
          - hp_lte: 20
        on_enter:
          - set_ai:
              move_speed: 2.5
              attack_range: 84
              attack_frames: 55
          - arena_set_hazard:
              group: arena_spikes
              enabled: true
          - emit_event: phase_2

      - name: phase_3
        start_when:
          - hp_lte: 10
        on_enter:
          - set_ai:
              move_speed: 3.0
              follow_range: 900
              attack_range: 96
              attack_frames: 45
          - arena_set_hazard:
              group: arena_spikes
              enabled: true
          - arena_set_transition:
              group: boss_exit
              enabled: false
  transform:
    x: 0
    y: 0
    scale_x: 1
    scale_y: 1
    rotation: 0
  sprite:
    use_source: false
    origin_x: 0
    origin_y: 0
    facing_left: true
  render_layer:
    index: 95
  animation:
    sheet: forsaken_scion-Sheet.png
    current: idle
    defs:
      idle:
        row: 0
        col_start: 0
        frame_count: 4
        frame_w: 128
        frame_h: 128
        fps: 8
        loop: true
      run:
        row: 1
        col_start: 0
        frame_count: 3
        frame_w: 128
        frame_h: 128
        fps: 10
        loop: true
      attack_regular:
        row: 2
        col_start: 0
        frame_count: 9
        frame_w: 128
        frame_h: 128
        fps: 10
        loop: false
      attack_overhead:
        row: 3
        col_start: 0
        frame_count: 15
        frame_w: 128
        frame_h: 128
        fps: 8
        loop: false
      death:
        row: 4
        col_start: 0
        frame_count: 14
        frame_w: 128
        frame_h: 128
        fps: 10
        loop: false
      jump_prep:
        row: 5
        col_start: 0
        frame_count: 4
        frame_w: 128
        frame_h: 128
        fps: 10
        loop: false
    playing: true
  audio:
    clips:
      - name: roar 
        file: robotic_monster_roar.wav 
        volume: 0.5
      - name: move 
        file: forsaken_scion_rolling.wav
        volume: 0.5
      - name: attack
        file: forsaken_scion_attack_regular.wav
        volume: 0.2
      - name: attack_overhead
        file: forsaken_scion_attack_overhead.wav
        volume: 0.5
      - name: hit
        file: forsaken_scion_hit.wav
        volume: 0.2
      - name: death
        file: forsaken_scion_death.wav
        volume: 0.6
  physics_body:
    width: 50
    height: 100
    offset_x: 36
    offset_y: 24
    mass: 1
    friction: 0.2
    elasticity: 0
    align_top_left: true
    scale_with_transform: true
  collision_layer:
    category: 4
    mask: 1
  repulsion_layer:
    category: 4
    mask: 1
  hazard:
    width: 50
    height: 80
    offset_x: 36
    offset_y: 48
    scale_with_transform: true
  health:
    initial: 30
  hitboxes:
    - width: 80
      height: 32
      offset_x: 50
      offset_y: 80
      damage: 1
      anim: attack_regular
      frames: [6]
    - width: 64
      height: 48
      offset_x: 100
      offset_y: 80
      damage: 1
      anim: attack_overhead
      frames: [11, 12]
  hurtboxes:
    - width: 80
      height: 100
      offset_x: 36
      offset_y: 24
